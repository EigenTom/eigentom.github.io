<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merged Project</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="./style.css">
</head>
<body>

    <!--Side Navigator-->
    <div class="nav nav-purple">
        <div class="nav nav-yellow">
            <div class="nav nav-white">
            <button class="close-btn">
                <i class="fas fa-times"></i>
            </button>
            
            <div style="margin-top: -100px; height:200px; width: 100%; align-items: center; display: flex; justify-content: center;" draggable="false">
                <img src="https://www.staffnet.manchester.ac.uk/brand/visual-identity/logo/logo_big.gif" alt="logo" class="logo">
            </div>

            <ul class="nav-list">
                <li><a href="#">Teams</a></li>
                <li><a href="#">Locations</a></li>
                <li><a href="#">Life at UoM</a></li>
                <li>
                <ul>
                    <li><a href="#">UoM culture memo</a></li>
                    <li><a href="#">Study life balance</a></li>
                    <li><a href="#">Inclusion & diversity</a></li>
                    <li><a href="#">Researches</a></li>
                </ul>
                </li>
            </ul>
            </div>
        </div>
    </div>


    <!--Top Navigator-->
    <div class="navigator">
        <ul>
            <li class="open-btn"><i class="fas fa-bars"></i></li>

            <li style="padding-left: 0px;">Your Manchester</li>

            
            
            <div class="navigator-search">
                <input type="text" class="search-input" placeholder="Search...">
                <button class="search-btn">
                    <li><i class="fas fa-search"></i></li>
                </button>
            </div>

            <li style="font-size: 14px; float: right; margin-left: 5px; margin-right: -15px;">BlackBoard</li>
            <li style="font-size: 14px; float: right; margin-right: -15px;">SPOT</li>
            <li style="font-size: 14px; float: right; margin-right: -15px;">MailBox</li>
            <li style="font-size: 14px; float: right; margin-right: -15px;">Attendance</li>

            
            
            </li>
        </ul>
    </div>


    <!--Main Context-->
    <div class="context-container">
        <style type="text/css">
            .col0 {
                width: 30%;
                margin-left: 10px;
                margin-right: 5px;
                background-color: white;
                border-radius: 5px;
                border: 1px solid #2b123a;
                box-shadow: 0px 0px 10px #2b123a;
                position: relative;
                max-height: 420px;
                
            }
            .col1 {
                width: 50%;
                margin-left: 5px;
                margin-right: 5px;
                background-color: white;
                border-radius: 5px;
                border: 1px solid #2b123a;
                box-shadow: 0px 0px 10px #2b123a;
                position: relative;
                max-height: 420px;
            }
            .col2 {
                width: 20%;
                margin-left: 5px;
                margin-right: 10px;
                background-color: white;
                border-radius: 5px;
                border: 1px solid #2b123a;
                box-shadow: 0px 0px 10px #2b123a;
                position: relative;
                max-height: 420px;
                
            }
        </style>
        <div class="col0">
            <style type="text/css">

                .clock-container {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    align-items: center;
                    
                }
                .clock {
                    position: relative;
                    width: 220px;
                    height: 220px;
                    margin-top: 50px;
                    border: 3px solid #2b123a;
                    border-radius: 150px;
                    

                }
                .needle {
                    background-color: #000;
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    height: 65px;
                    width: 3px;
                    transform-origin: bottom center;
                    transition: all .5s ease-in;
                }
                .needle.hour {
                    transform: translate(-50%, -100%) rotate(0deg);
                }

                .needle.minute {
                    transform: translate(-50%, -100%) rotate(0deg);
                    height: 100px;
                }

                .needle.second {
                    transform: translate(-50%, -100%) rotate(0deg);
                    height: 100px;
                    background-color: #660099;
                }

                .center-point {
                    background-color: #FFF;
                    width: 10px;
                    height: 10px;
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    border: 3px solid #660099;
                    transform: translate(-50%, -50%);
                    border-radius: 50%;
                }

                .center-point::after {
                    content: '';
                    background-color: var(--primary-color);
                    width: 5px;
                    height: 5px;
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    border-radius: 50%;
                }

                .time {
                    font-size: 60px;
                    color: #2b123a;
                }

                .date {
                    color: #aaa;
                    font-size: 14px;
                    letter-spacing: 0.3px;
                    text-transform: uppercase;
                    margin-bottom: 20px;
                }

                .date .circle {
                    background-color: #660099;
                    color: white;
                    border-radius: 50%;
                    height: 28px;
                    width: 28px;
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    line-height: 18px;
                    transition: all 0.5s ease-in;
                    font-size: 12px;
                }
                .component-title {
                    
                    height: 30px;
                    width: 100%;
                    top: -10px;
                    background-color: #2b123a;
                    border-radius: 4px;
                    border-bottom-left-radius: 0;
                    border-bottom-right-radius: 0;
                }
                .component-title div {
                    color: #FFF;
                    font-weight: 800;
                    font-size: 16px;
                    line-height: 30px;    
                    margin-left: 10px;
                    
                }
                
            </style>
            
            <div class="component-title">
                <div class="title-context">Clock</div>
            </div>

            <!--Analog Clock-->
            <div class="clock-container">
                
                
                <div class="clock">
                    <div class="needle hour"></div>
                    <div class="needle minute"></div>
                    <div class="needle second"></div>
                    <div class="center-point"></div>
                </div>
                <div class="time"></div>
                <div class="date"></div>
            </div>
            <script>
                const hourEl = document.querySelector('.hour');
                const minuteEl = document.querySelector('.minute');
                const secondEl = document.querySelector('.second');
                const timeEl = document.querySelector('.time');
                const dateEl = document.querySelector('.date');
                const toggle = document.querySelector('.toggle');
                const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

                function setTime() {
                    const time = new Date();
                    const month = time.getMonth()
                    const day = time.getDay()
                    const date = time.getDate()
                    const hours = time.getHours()
                    const hoursForClock = hours >= 13 ? hours % 12 : hours;
                    const minutes = time.getMinutes()
                    const seconds = time.getSeconds()
                    const ampm = hours >= 12 ? 'PM' : 'AM'

                    hourEl.style.transform = `translate(-50%, -100%) rotate(${scale(hoursForClock, 0, 12, 0, 360)}deg)`
                    minuteEl.style.transform = `translate(-50%, -100%) rotate(${scale(minutes, 0, 60, 0, 360)}deg)`
                    secondEl.style.transform = `translate(-50%, -100%) rotate(${scale(seconds, 0, 60, 0, 360)}deg)`

                    timeEl.innerHTML = `${hoursForClock}:${minutes < 10 ? `0${minutes}` : minutes} ${ampm}`
                    dateEl.innerHTML = `${days[day]}, ${months[month]} <span class="circle">${date}</span>`
                }

                // StackOverflow https://stackoverflow.com/questions/10756313/javascript-jquery-map-a-range-of-numbers-to-another-range-of-numbers
                const scale = (num, in_min, in_max, out_min, out_max) => {
                    return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
                }

                setTime()

                setInterval(setTime, 1000)
            </script>    
        </div>
        
        <div class="col1">
            <style type="text/css">

            </style>
            
            <div class="component-title">
                <div class="title-context">Manchester News</div>
            </div>

            <script>

            </script>
        </div>

        <div class="col2">
            <style type="text/css">
                .todos {
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto;
                    max-height: 93%;
                    list-style-type: none;
                    overflow: hidden;
                    overflow-y: scroll;
                    padding-top: 40px;
                    width: 100%;
                    
                }
                .todo-form {
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                    max-width: 80%; 
                    
                }
                .todo-input {
                    position: absolute;
                    top: 35px;
                    left: 2.5%;
                    height: 30px;
                    border: 2px solid #FFCC33;
                    border-radius: 3px;
                    color: #444;
                    font-size: 16px;
                    padding-left: 5px;
                    width: 95%;
                    
                }
                .todo-input::placeholder {
                    color: #999999;
                }
                .small {
                    color: #999999;
                    font-size: .8rem;
                    width: 100%;
                    margin-top: 3px;
                    margin-bottom: 15px;
                }
                .todos li {
                    border-top: 1px solid #e5e5e5;
                    cursor: pointer;
                    font-size: 1.5em;
                    padding: 1rem 2rem;
                    text-align: center;
                    overflow: hidden;
                    
                }
                .todos ul {
                    margin: 0;
                    padding: 0;
                }

                .todos li.completed {
                    color: #b6b6b6;
                    text-decoration: line-through;
                }

            </style>
            
            <div class="component-title">
                <div class="title-context">TODO List</div>    
            </div>
            <div class="todos">
                
                <form id="todo-form">    
                    <input type="text" class="todo-input" id="todo-input" placeholder="Enter your todo" autocomplete="off">
                    <ul class="todos" id="todos">

                    </ul>
                    <div class="small" style="text-align: center;">
                        Left click to toggle completed. <br> Right click to delete todo.
                    </div>
                </form>

                </div> 
            </div>        
            
            <script>
                const form = document.getElementById('todo-form');
                const input = document.getElementById('todo-input');
                const todosUL = document.getElementById('todos');
                
                // store items in localStorage
                const todos = JSON.parse(localStorage.getItem('todos'));

                // display existing todos in localStorage if they exists
                if (todos) {
                    todos.forEach(todo => addTodo(todo));
                }

                form.addEventListener('submit', (e) => {
                    console.log('yes');
                    e.preventDefault();
                    addTodo();
                })

                function addTodo(todo) {
                    let todoText = input.value;
                    if (todo) {
                        todotext = todo.text
                    }
                    if (todoText) {
                        const todoEl = document.createElement('li');
                        if (todo && todo.completed) {
                            todoEl.classList.add('completed');
                        }
                        todoEl.innerText = todoText;

                        // left click to complete
                        todoEl.addEventListener('click', () => {
                            todoEl.classList.toggle('completed');
                            updateLS();
                        })

                        // right click to remove
                        todoEl.addEventListener('contextmenu', (e) => {
                            e.preventDefault()

                            todoEl.remove()
                            updateLS()
                        }) 

                        todosUL.appendChild(todoEl);
                        input.value = '';
                        updateLS();
                    }
                }

                function updateLS() {
                    todosEl = document.querySelectorAll('li');
                    const todos = [];

                    todosEl.forEach(todoEl => {
                        todos.push({
                            text: todoEl.innerText,
                            completed: todoEl.classList.contains('completed')
                        })
                    })

                    localStorage.setItem('todos', JSON.stringify(todos));
                }

            </script>
        </div>
    </div>



    <script src="script.js"></script>

</body>
</html>