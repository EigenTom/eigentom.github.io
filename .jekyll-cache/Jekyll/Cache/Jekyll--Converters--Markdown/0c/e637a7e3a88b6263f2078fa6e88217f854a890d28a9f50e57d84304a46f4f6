I"<h1 id="ch3-查找">Ch3 查找</h1>

<p>在本章中, 我们将对一系列 <strong>经过实践检验的</strong> 经典查找算法进行介绍和讨论. 我们会使用 <strong>符号表</strong> 描述一张 <strong>抽象</strong> 的表格, 并假定会将 <strong>信息 (值)</strong> 存储于其中, 按照指定的 <strong>键</strong> 检索这些信息. <strong>键</strong> 和 <strong>值</strong> 的具体意义取决于不同的实际应用.</p>

<p><strong>符号表</strong> 往往又被称为 <strong>字典</strong>. 类比于英语字典, <strong>键</strong> 就是 <strong>单词</strong>, <strong>值</strong> 就是该单词对应的 <strong>定义, 发音和词源等解释</strong>. 符号表也可以被称为 <strong>索引</strong>. 在一本书的索引中, <strong>键</strong> 就是 <strong>术语</strong>, 而 <strong>值</strong> 就是 <strong>书中该术语出现的所有位置</strong>.</p>

<p>在说明基本的 <code class="language-plaintext highlighter-rouge">API</code> 和两种实现后, 我们会使用三种数据结构: <strong>二叉查找树</strong>, <strong>红黑树</strong>, <strong>散列表</strong> 对符号表进行高效的实现.</p>

<h2 id="31-符号表">3.1 符号表</h2>

<p>符号表的主要作用是 <strong>将一个键和一个值相关联</strong>. 要实现符号表, 首先需要定义其背后的数据结构, 并指明创建并操作这种数据结构, 以实现插入, 查找等操作所需的算法.</p>

<p><strong>定义</strong></p>
<blockquote>
  <p><strong>符号表</strong> 是一种 <strong>存储键值对</strong> 的数据结构, 支持两种操作: <strong>插入</strong> (将一对新的键值对存入表中) 和 <strong>查找</strong> (根据给定的键得到相应的值).</p>
</blockquote>

<h3 id="api">API</h3>

<p>显然, 符号表也是一种典型的 <strong>抽象数据类型</strong>. 其 <code class="language-plaintext highlighter-rouge">API</code> 如下:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">public class</code></th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">ST&lt;Key, Value&gt;</code></th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">ST()</code></td>
      <td style="text-align: left">创建符号表</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">void</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">put(Key key, Value, val)</code></td>
      <td style="text-align: left">将键值对存入表中, 若值为空则将键 <code class="language-plaintext highlighter-rouge">key</code> 从表中删除</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">Value</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">get(Key key)</code></td>
      <td style="text-align: left">获取键 <code class="language-plaintext highlighter-rouge">key</code> 对应的值, 若键不存在则返回 <code class="language-plaintext highlighter-rouge">null</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">void</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">delete(Key key)</code></td>
      <td style="text-align: left">从表中删去键 <code class="language-plaintext highlighter-rouge">key</code> 及其对应的值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">boolean</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">contains(Key key)</code></td>
      <td style="text-align: left">检查键 <code class="language-plaintext highlighter-rouge">key</code> 在表中是否有对应的值</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">boolean</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">isEmpty()</code></td>
      <td style="text-align: left">检查表是否为空</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">size()</code></td>
      <td style="text-align: left">返回表中键值对的数量</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">Iterable&lt;Key&gt;</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">keys()</code></td>
      <td style="text-align: left">返回表中所有键的集合</td>
    </tr>
  </tbody>
</table>

<p>我们下面再解释一些具体实现中的一些设计规则.</p>

<h4 id="1-泛型">1. 泛型</h4>
<p>和排序一样, 在设计方法时, 我们不指定处理对象的类型. 我们通过 <strong>明确指定查找时键和值的类型</strong> 区分它们.</p>

<h4 id="2-键重复的情形">2. 键重复的情形</h4>
<p>在所有实现中我们都遵循下列规则:</p>
<ol>
  <li>键值一一对应.</li>
  <li>当将要存入的键值对和表中已有的键 (及其关联的值) 相冲突时, 用新值替换旧的.</li>
</ol>

<h4 id="3-空键和空值">3. 空键和空值</h4>
<p>我们的实现中不允许空键和空值.</p>

<h4 id="4-删除操作">4. 删除操作</h4>
<p>在符号表中, 删除的实现可以是 <strong>延时删除</strong> (将键对应的值置为空, 然后在某个时候删掉所有值为空的键), 或 <strong>即时删除</strong> (立刻从表中删除指定的键). 在我们的实现中, 我们采用 <strong>即时删除</strong>.</p>

<h4 id="5-便捷方法">5. 便捷方法</h4>
<p>为简化用例, 我们再添加两个便捷方法:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">方法</th>
      <th style="text-align: left">默认实现</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">void delete(Key key)</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">put(key, null)</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">boolean contains(key)</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">return get(key) != null;</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bolean isEmpty()</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">return size() == 0;</code></td>
    </tr>
  </tbody>
</table>

<h4 id="6-迭代">6. 迭代</h4>
<p>为方便用例处理表中的所有键值, 我们强制所有实现必须包含 <code class="language-plaintext highlighter-rouge">Iterable</code> 接口.</p>

<h4 id="7-键的等价性">7. 键的等价性</h4>
<p>对于标准数据类型, 我们可以使用 <code class="language-plaintext highlighter-rouge">Java</code> 内置的等价性实现 <code class="language-plaintext highlighter-rouge">equals()</code>. 若需要自定义键, 就需要 <strong>重写 <code class="language-plaintext highlighter-rouge">equals()</code> 方法</strong>. 为了确保表的一致性, 最好使用 <strong>不可变的数据类型</strong> 作为键.</p>

<p><br /></p>

<h3 id="有序符号表">有序符号表</h3>

:ET